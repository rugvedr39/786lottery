<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>User Profile</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
    <link rel="stylesheet" href="/plugins/fontawesome-free/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="//cdn.jsdelivr.net/npm/@sweetalert2/theme-dark@4/dark.css" rel="stylesheet">
    <link rel="stylesheet" href="/dist/css/adminlte.min.css">
    <link rel="stylesheet" href="/css/admin.css">
</head>

<body class="hold-transition sidebar-mini">
    <div class="wrapper">
        <%- include('nav') %>
        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <section class="content-header">
                <div class="container-fluid">
                    <div class="row mb-2">
                        <div class="col-sm-6">
                            <h1>User Information</h1>
                        </div>
                    </div>
                </div>
                <!-- /.container-fluid -->
            </section>

            <!-- Main content -->
            <section class="content">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-3">

                            <!-- Profile Image -->
                            <div class="card card-primary card-outline">
                                <div class="card-body box-profile">
                                    <div class="text-center">
                                        <img class="profile-user-img img-fluid img-circle" src="/images/avatar.svg" alt="User profile picture">
                                    </div>

                                    <h3 class="profile-username text-center">Member...</h3>

                                    <p class="text-muted text-center" id="id_user">ID: 0</p>

                                    <ul class="list-group list-group-unbordered mb-3">
                                        <li class="list-group-item">
                                            <b>Role</b> <a class="float-right" id="level">Loading...</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>Surplus</b> <a class="float-right" id="money">0</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>Total recharge</b> <a class="float-right" id="total_money">0</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>Total withdraw</b> <a class="float-right" id="total_withdraw">0</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>IP</b> <a class="float-right" id="ip">Loading...</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>Telegram</b> <a class="float-right" id="telegram" href="Loading...">Loading...</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>Inviter</b> <a class="float-right" id="invite">Loading...</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>DAILY</b> <a class="float-right" id="daily">Loading...</a>
                                        </li>
                                    </ul>

                                </div>
                                <div class="card-body box-profile">
                                    <h3 class=" text-center">Promotion data</h3>

                                    <ul class="list-group list-group-unbordered mb-3">
                                        <li class="list-group-item">
                                            <b>Total direct commission</b> <a class="float-right" id="total_direct_commission">0</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>Total team commission</b> <a class="float-right" id="total_team_commission">0</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>Total commission</b> <a class="float-right" id="roses_all">0</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>Total commission today</b> <a class="float-right" id="roses_today">0</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>Level 1</b> <a class="float-right" id="f1">0</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>Level 2</b> <a class="float-right" id="f2">0</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>Level 3</b> <a class="float-right" id="f3">0</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>Level 4</b> <a class="float-right" id="f4">0</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>Team Size</b> <a class="float-right" id="total_mem">0</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>Direct Invites</b> <a class="float-right" id="direct_invites">0</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>Direct Invites today</b> <a class="float-right" id="direct_invites_today">0</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>Total recharge (l1)</b> <a class="float-right" id="total_f1_recharge">0</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>Total bet (l1)</b> <a class="float-right" id="total_f1_bet">0</a>
                                        </li>
                                        <li class="list-group-item">
                                            <b>Daily Bet(500+) (l1)</b> <a class="float-right" id="total_f1_active">0</a>
                                        </li>
                                    </ul>

                                    <a href="#" class="btn btn-primary btn-block show-inviter-data">
                                        <b>show inviter data</b>
                                    </a>
                                </div>
                                <!-- /.card-body -->
                            </div>
                            <!-- /.card -->

                            <!-- About Me Box -->
                            <div class="card card-primary">
                                <div class="card-header">
                                    <h3 class="card-title">Bank information</h3>
                                </div>
                                <!-- /.card-header -->
                                <div class="card-body">
                                    
                                    <strong>
                                        <i class="fas fa-pencil-alt mr-1"></i> 
                                        <span>Account name</span>
                                    </strong>

                                    <p class="text-muted"> 
                                        <span class="tag tag-danger" id="name">No banks added yet</span>
                                    </p>
                                    <hr>
                                    <strong>
                                        <i class="far fa-file-alt mr-1"></i>
                                        <span>Account number</span>
                                    </strong>

                                    <p class="text-muted" id="stk">No banks added yet</p>
                                    
                                    <hr>

                                    <strong>
                                        <i class="fas fa-map-marker-alt mr-1"></i>
                                        <span>Address</span>
                                    </strong>

                                    <p class="text-muted" id="location">No banks added yet</p>

                                    <hr>
                                    <strong>
                                        <i class="fas fa-calendar mr-1"></i>
                                        <span>Extra time</span>
                                    </strong>
                                    <p class="text-muted" id="timeAddBank">No banks added yet</p>

                                    <strong>
                                        <i class="fas fa-address-book mr-1"></i>
                                        <span>Tron USDT Address</span>
                                    </strong>
                                    <p class="text-muted" id="tronUSDTAddress">No Tron USDT address added yet</p>

                                    <!-- <a href="#" class="btn btn-primary btn-block">
                                        <b style="text-transform: uppercase;">EDIT</b>
                                    </a> -->
                                </div>
                            </div>
                        </div>
                        <div class="col-md-9" style="overflow: auto;">
                            <!-- F1 Members Table -->
                            <%- include('table/listF1.ejs') %>
                            <!-- F2 Members Table -->
                            <%- include('table/listF2.ejs') %>
                            <!-- F3 Members Table -->
                            <%- include('table/listF3.ejs') %>
                            <!-- F4 Members Table -->
                            <%- include('table/listF4.ejs') %>
                            <!-- Table Recharge -->
                            <%- include('table/listRecharge.ejs') %>
                            <!-- END TABLE -->
                            <!-- Table Withdraw -->
                            <%- include('table/listWithdraw.ejs') %>
                            <!-- END TABLE -->
                            <!-- Table Withdraw -->
                            <%- include('table/listRedenvelope.ejs') %>
                            <!-- END TABLE -->
                            <!-- Table Withdraw -->
                            <%- include('table/listBet.ejs') %>
                            <!-- END TABLE -->
                        </div> 
                    </div>
                </div>
            </section> 
        </div>
    </div>
    <script src="/plugins/jquery/jquery.min.js"></script>
    <script src="/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/dist/js/adminlte.min.js"></script>
    <script src="/js/admin/admin.js"></script>
    <script>
        function formateT(params) {
            let result = (params < 10) ? "0" + params : params;
            return result;
        }

        function timerJoin(params = '') {
            let date = '';
            if (params) {
            date = new Date(Number(params));
            } else {
            date = Date.now();
            date = new Date(Number(date));
            }
            let years = formateT(date.getFullYear());
            let months = formateT(date.getMonth() + 1);
            let days = formateT(date.getDate());
            let weeks = formateT(date.getDay());
        
            let hours = formateT(date.getHours());
            let minutes = formateT(date.getMinutes());
            let seconds = formateT(date.getSeconds());
            // return years + '-' + months + '-' + days + ' ' + hours + '-' + minutes + '-' + seconds;
            return years + " - " + months + " - " + days;
        }
    </script>
    <script>
        let url = window.location.pathname;
        let phones = url.split('/');
        let phone = phones[phones.length - 1];
        $.ajax({
            type: "POST",
            url: "/api/webapi/admin/member/info",
            data: {
                phone: phone,
            },
            dataType: "json",
            success: function (response) {
                if(response.status === false) return false;
                let user = response.datas[0];
                // user
                $('.profile-username').text(user.name_user);
                $('#telegram').text(response.telegram ? response.telegram.telegram : "No telegram");
                // $('#telegram').attr('href', response.telegram.telegram);
                $('#id_user').text("ID: " + user.id_user);
                $('#money').text(parseFloat(user.money).toFixed(2));
                $("#total_direct_commission").text(parseFloat(user.roses_f1).toFixed(2))
                $("#total_team_commission").text(parseFloat(user.roses_f).toFixed(2))
                $('#roses_all').text(parseFloat(Number(user.roses_f) + Number(user.roses_f1)).toFixed(2));
                $('#roses_today').text(parseFloat(user.roses_today).toFixed(2));
                $('#invite').text(response.ng_moi ? response.ng_moi.phone : "No inviter");
                if (response.ng_moi) {
                    $(".show-inviter-data").attr("href", "/admin/member/info/" + response.ng_moi.phone);
                }
                $('#daily').text(response.daily);

                $('#f1').text(response.f1 + " member");
                $('#f2').text(response.f2 + " member");
                $('#f3').text(response.f3 + " member");
                $('#f4').text(response.f4 + " member");
                $('#total_mem').text(response.f1 + response.f2 + response.f3 + response.f4);
                $("#direct_invites").text(response.f1)
                $("#direct_invites_today").text(response.f1_today)
                $("#total_f1_recharge").text(response.f1_total_recharge)
                $("#total_f1_bet").text(response.f1_total_bet)
                $("#total_f1_active").text(response.f1_active_today)
                $('#ip').text(user.ip_address);
                $('#level').text((user.level == 1) ? 'ADMIN' : (user.level == 2) ? "CTV" : "USER");

                $('#total_money').text((response.total_r[0].total) ? response.total_r[0].total + '.0' : '0.0');
                $('#total_withdraw').text((response.total_w[0].total) ? response.total_w[0].total + '.0' : '0.0');

                // bank
                if (response.bank_user[0]) {
                    $('#name').text(response.bank_user[0].name_user);
                    $('#stk').text(response.bank_user[0].stk);
                    $('#location').text(response.bank_user[0].tinh + " - " + response.bank_user[0].tp);
                    $('#timeAddBank').text(timerJoin(response.bank_user[0].time));
                }

                if (response.usdt_user[0]) {
                    $("#tronUSDTAddress").text(response.usdt_user[0].usdt_address)
                }
            }
        });
    </script>

    <!-- f1 members -->
    <script>
        const RenderF1Members = (datas) => {
            if (datas.length == 0) {
                $('#list-f1').html(`
                    <tr class="text-center">
                    <td colspan="7">no data...</td>
                    </tr>
                `);
                return;
            }

            let html = '';
            datas.map((data) => {
                html += `
                <tr class="text-center" style="">
                <td>${data.id_user}</td>
                <td>
                    <b style="color: #2003db">${data.phone}</b>
                </td>
                <td>
                    <b class="${(data.level == 1) ? 'text-danger' : ''}">${(data.level == 1) ? 'ADMIN' : 'USER'}</b>
                </td>
                <td>
                    <b>${data.money}</b>
                </td>
                <td class="project-state">
                    ${(data.status == 1) ? '<span class="badge badge-success">Active</span>' : '<span class="badge badge-warning">Banned</span>'}
                </td>
                <td>
                    <b style="color: #2003db">${data.password}</b>
                </td>
                <!--<td class="project-state">
                    <span class="badge badge-warning">Offline</span>
                </td>
                <td class="project-state">
                    <span class="badge badge-success">Online</span>
                </td> -->
                <td class="project-actions text-center" style="min-width: 100px">
                    <a class="btn btn-primary btn-sm confirm-btn" href="/admin/member/info/${data.phone}">
                    <i class="fas fa-folder"></i> Profile</a>
                    ${(data.status == 1) ? `<a class="btn btn-info btn-sm btn-danger" id="${data.id}" href="#">
                    <i class="fas fa-pencil-alt"></i> Lock Up
                    </a>` : ''}
                    ${(data.status == 2) ? `<a class="btn btn-info btn-sm btn-info1" id="${data.id}" href="#">
                    <i class="fas fa-pencil-alt"></i> Open
                    </a>` : ''}
                    <!--<a class="btn btn-danger btn-sm delete-btn" href="#">
                    <i class="fas fa-trash"></i> Banner
                    </a>-->
                </td>
                </tr>`;
                $("#list-f1").html(html);
            });

            $('.btn-danger').click(function (e) { 
                e.preventDefault();
                let check = confirm("Are you sure you want to lock this account ?");
                let id = $(this).attr('id');
                if (check) {
                $.ajax({
                    type: "POST",
                    url: "/api/webapi/admin/banned",
                    data: {
                        id: id,
                        type: 'close'
                    },
                    dataType: "json",
                    success: function (response) {
                    alert(response.message);
                    location.reload();
                    }
                });
                }
            });

            $('.btn-info1').click(function (e) { 
                e.preventDefault();
                let check = confirm("Are you sure you want to unlock this account ?");
                let id = $(this).attr('id');
                if (check) {
                $.ajax({
                    type: "POST",
                    url: "/api/webapi/admin/banned",
                    data: {
                    id: id,
                    type: 'open'
                    },
                    dataType: "json",
                    success: function (response) {
                    alert(response.message);
                    location.reload();
                    }
                });
                }
            });
        }

        var f1Pageno = 0;
        var f1Limit = 15;
        var f1Page = 1;
        $.ajax({
            type: "POST",
            url: "/admin/member/listF1/<%=phone%>",
            data: {
                phone: phone,
                typeid: "1",
                pageno: f1Pageno,
                limit: f1Limit,
                language: "vi",
            },
            dataType: "json",
            success: function (response) {
                $('#text-f1').text(f1Page + ' / ' + response.page_total);
                if (response.status === true) return RenderF1Members(response.datas);
            },
        });

        $('#nextF1').click(function (e) {
            f1Pageno += f1Limit;
            e.preventDefault();
            $.ajax({
                type: "POST",
                url: "/admin/member/listF1/<%=phone%>",
                data: {
                    typeid: "1",
                    pageno: f1Pageno,
                    limit: f1Limit,
                    language: "vi",
                    phone
                },
                dataType: "json",
                success: function (response) {
                if(response.datas.length == 0) {
                    $('#nextF1').addClass('block-click');
                    return f1Pageno -= f1Limit
                };
                $('#text-f1').text(++f1Page + ' / ' + response.page_total);
                if (response.status === true) return RenderF1Members(response.datas);
                }
            });
        });

        $('#previousF1').click(function (e) { 
            e.preventDefault();
            $('#nextF1').removeClass('block-click');
            f1Pageno -= f1Limit;
            if(f1Pageno < 0) return f1Pageno = 0;
            $.ajax({
                type: "POST",
                url: "/admin/member/listF1/<%=phone%>",
                data: {
                    typeid: "1",
                    pageno: f1Pageno,
                    limit: f1Limit,
                    language: "vi",
                    phone
                },
                dataType: "json",
                success: function (response) {
                $('#text-withdraw').text(--f1Page + ' / ' + response.page_total);
                if (response.status === true) return RenderF1Members(response.datas);
                }
            });
        });
    </script>
    <!-- f1 members -->

    <!-- f2 members -->
    <script>
        const RenderF2Members = (datas) => {
            if (datas.length == 0) {
                $('#list-f2').html(`
                    <tr class="text-center">
                    <td colspan="7">no data...</td>
                    </tr>
                `);
                return;
            }
            let html = '';
            datas.map((data) => {
                html += `
                <tr class="text-center" style="">
                <td>${data.id_user}</td>
                <td>
                    <b style="color: #2003db">${data.phone}</b>
                </td>
                <td>
                    <b class="${(data.level == 1) ? 'text-danger' : ''}">${(data.level == 1) ? 'ADMIN' : 'USER'}</b>
                </td>
                <td>
                    <b>${data.money}</b>
                </td>
                <td class="project-state">
                    ${(data.status == 1) ? '<span class="badge badge-success">Active</span>' : '<span class="badge badge-warning">Banned</span>'}
                </td>
                <td>
                    <b style="color: #2003db">${data.password}</b>
                </td>
                <!--<td class="project-state">
                    <span class="badge badge-warning">Offline</span>
                </td>
                <td class="project-state">
                    <span class="badge badge-success">Online</span>
                </td> -->
                <td class="project-actions text-center" style="min-width: 100px">
                    <a class="btn btn-primary btn-sm confirm-btn" href="/admin/member/info/${data.phone}">
                    <i class="fas fa-folder"></i> Profile</a>
                    ${(data.status == 1) ? `<a class="btn btn-info btn-sm btn-danger" id="${data.id}" href="#">
                    <i class="fas fa-pencil-alt"></i> Lock Up
                    </a>` : ''}
                    ${(data.status == 2) ? `<a class="btn btn-info btn-sm btn-info1" id="${data.id}" href="#">
                    <i class="fas fa-pencil-alt"></i> Open
                    </a>` : ''}
                    <!--<a class="btn btn-danger btn-sm delete-btn" href="#">
                    <i class="fas fa-trash"></i> Banner
                    </a>-->
                </td>
                </tr>`;
                $("#list-f2").html(html);
            });

            $('.btn-danger').click(function (e) { 
                e.preventDefault();
                let check = confirm("Are you sure you want to lock this account ?");
                let id = $(this).attr('id');
                if (check) {
                $.ajax({
                    type: "POST",
                    url: "/api/webapi/admin/banned",
                    data: {
                    id: id,
                    type: 'close'
                    },
                    dataType: "json",
                    success: function (response) {
                    alert(response.message);
                    location.reload();
                    }
                });
                }
            });

            $('.btn-info1').click(function (e) { 
                e.preventDefault();
                let check = confirm("Are you sure you want to unlock this account ?");
                let id = $(this).attr('id');
                if (check) {
                $.ajax({
                    type: "POST",
                    url: "/api/webapi/admin/banned",
                    data: {
                    id: id,
                    type: 'open'
                    },
                    dataType: "json",
                    success: function (response) {
                    alert(response.message);
                    location.reload();
                    }
                });
                }
            });
        }

        var f2PageNo = 0;
        var f2Limit = 15;
        var f2Page = 1;
        $.ajax({
            type: "POST",
            url: "/admin/member/listF2/<%=phone%>",
            data: {
                phone: phone,
                typeid: "1",
                pageno: f2PageNo,
                limit: f2Limit,
                language: "vi",
            },
            dataType: "json",
            success: function (response) {
                $('#text-f2').text(f2Page + ' / ' + response.page_total);
                if (response.status === true) return RenderF2Members(response.datas);
            },
        });

        $('#nextF2').click(function (e) {
            f2PageNo += f2Limit;

            e.preventDefault();
            $.ajax({
                type: "POST",
                url: "/admin/member/listF2/<%=phone%>",
                data: {
                    typeid: "1",
                    pageno: f2PageNo,
                    limit: f2Limit,
                    language: "vi",
                    phone
                },
                dataType: "json",
                success: function (response) {
                if(response.datas.length == 0) {
                    $('#nextF2').addClass('block-click');
                    return f2PageNo -= f2Limit
                };
                $('#text-f2').text(++f2Page + ' / ' + response.page_total);
                if (response.status === true) return RenderF2Members(response.datas);
                }
            });
        });

        $('#previousF2').click(function (e) { 
            e.preventDefault();
            $('#nextF2').removeClass('block-click');
            f2PageNo -= f2Limit;
            if(f2PageNo < 0) return f2PageNo = 0;
            $.ajax({
                type: "POST",
                url: "/admin/member/listF2/<%=phone%>",
                data: {
                    typeid: "1",
                    pageno: f2PageNo,
                    limit: f2Limit,
                    language: "vi",
                    phone
                },
                dataType: "json",
                success: function (response) {
                $('#text-withdraw').text(--f2Page + ' / ' + response.page_total);
                if (response.status === true) return RenderF2Members(response.datas);
                }
            });
        });
    </script>
    <!-- f2 members -->

    <!-- f3 members -->
    <script>
        const RenderF3Members = (datas) => {
            if (datas.length == 0) {
                $('#list-f3').html(`
                    <tr class="text-center">
                    <td colspan="7">no data...</td>
                    </tr>
                `);
                return;
            }

            let html = '';
            datas.map((data) => {
                html += `
                <tr class="text-center" style="">
                <td>${data.id_user}</td>
                <td>
                    <b style="color: #2003db">${data.phone}</b>
                </td>
                <td>
                    <b class="${(data.level == 1) ? 'text-danger' : ''}">${(data.level == 1) ? 'ADMIN' : 'USER'}</b>
                </td>
                <td>
                    <b>${data.money}</b>
                </td>
                <td class="project-state">
                    ${(data.status == 1) ? '<span class="badge badge-success">Active</span>' : '<span class="badge badge-warning">Banned</span>'}
                </td>
                <td>
                    <b style="color: #2003db">${data.password}</b>
                </td>
                <!--<td class="project-state">
                    <span class="badge badge-warning">Offline</span>
                </td>
                <td class="project-state">
                    <span class="badge badge-success">Online</span>
                </td> -->
                <td class="project-actions text-center" style="min-width: 100px">
                    <a class="btn btn-primary btn-sm confirm-btn" href="/admin/member/info/${data.phone}">
                    <i class="fas fa-folder"></i> Profile</a>
                    ${(data.status == 1) ? `<a class="btn btn-info btn-sm btn-danger" id="${data.id}" href="#">
                    <i class="fas fa-pencil-alt"></i> Lock Up
                    </a>` : ''}
                    ${(data.status == 2) ? `<a class="btn btn-info btn-sm btn-info1" id="${data.id}" href="#">
                    <i class="fas fa-pencil-alt"></i> Open
                    </a>` : ''}
                    <!--<a class="btn btn-danger btn-sm delete-btn" href="#">
                    <i class="fas fa-trash"></i> Banner
                    </a>-->
                </td>
                </tr>`;
                $("#list-f3").html(html);
            });

            $('.btn-danger').click(function (e) { 
                e.preventDefault();
                let check = confirm("Are you sure you want to lock this account ?");
                let id = $(this).attr('id');
                if (check) {
                $.ajax({
                    type: "POST",
                    url: "/api/webapi/admin/banned",
                    data: {
                    id: id,
                    type: 'close'
                    },
                    dataType: "json",
                    success: function (response) {
                    alert(response.message);
                    location.reload();
                    }
                });
                }
            });

            $('.btn-info1').click(function (e) { 
                e.preventDefault();
                let check = confirm("Are you sure you want to unlock this account ?");
                let id = $(this).attr('id');
                if (check) {
                $.ajax({
                    type: "POST",
                    url: "/api/webapi/admin/banned",
                    data: {
                    id: id,
                    type: 'open'
                    },
                    dataType: "json",
                    success: function (response) {
                    alert(response.message);
                    location.reload();
                    }
                });
                }
            });
        }

        var f3PageNo = 0;
        var f3Limit = 15;
        var f3Page = 1;
        $.ajax({
            type: "POST",
            url: "/admin/member/listF3/<%=phone%>",
            data: {
                phone: phone,
                typeid: "1",
                pageno: f3PageNo,
                limit: f3Limit,
                language: "vi",
            },
            dataType: "json",
            success: function (response) {
                $('#text-f3').text(f3Page + ' / ' + response.page_total);
                if (response.status === true) return RenderF3Members(response.datas);
            },
        });

        $('#nextF3').click(function (e) {
            f3PageNo += f3Limit;

            e.preventDefault();
            $.ajax({
                type: "POST",
                url: "/admin/member/listF3/<%=phone%>",
                data: {
                    typeid: "1",
                    pageno: f3PageNo,
                    limit: f3Limit,
                    language: "vi",
                    phone
                },
                dataType: "json",
                success: function (response) {
                if(response.datas.length == 0) {
                    $('#nextF3').addClass('block-click');
                    return f3PageNo -= f3Limit
                };
                $('#text-f3').text(++f3Page + ' / ' + response.page_total);
                if (response.status === true) return RenderF3Members(response.datas);
                }
            });
        });

        $('#previousF3').click(function (e) { 
            e.preventDefault();
            $('#nextF3').removeClass('block-click');
            f3PageNo -= f3Limit;
            if(f3PageNo < 0) return f3PageNo = 0;
            $.ajax({
                type: "POST",
                url: "/admin/member/listF3/<%=phone%>",
                data: {
                    typeid: "1",
                    pageno: f3PageNo,
                    limit: f3Limit,
                    language: "vi",
                    phone
                },
                dataType: "json",
                success: function (response) {
                    $('#text-withdraw').text(--f3Page + ' / ' + response.page_total);
                    if (response.status === true) return RenderF3Members(response.datas);
                }
            });
        });
    </script>
    <!-- f3 members -->

    <!-- f4 members -->
    <script>
        const RenderF4Members = (datas) => {
            if (datas.length == 0) {
                $('#list-f4').html(`
                    <tr class="text-center">
                    <td colspan="7">no data...</td>
                    </tr>
                `);
                return;
            }

            let html = '';
            datas.map((data) => {
                html += `
                <tr class="text-center" style="">
                <td>${data.id_user}</td>
                <td>
                    <b style="color: #2003db">${data.phone}</b>
                </td>
                <td>
                    <b class="${(data.level == 1) ? 'text-danger' : ''}">${(data.level == 1) ? 'ADMIN' : 'USER'}</b>
                </td>
                <td>
                    <b>${data.money}</b>
                </td>
                <td class="project-state">
                    ${(data.status == 1) ? '<span class="badge badge-success">Active</span>' : '<span class="badge badge-warning">Banned</span>'}
                </td>
                <td>
                    <b style="color: #2003db">${data.password}</b>
                </td>
                <!--<td class="project-state">
                    <span class="badge badge-warning">Offline</span>
                </td>
                <td class="project-state">
                    <span class="badge badge-success">Online</span>
                </td> -->
                <td class="project-actions text-center" style="min-width: 100px">
                    <a class="btn btn-primary btn-sm confirm-btn" href="/admin/member/info/${data.phone}">
                    <i class="fas fa-folder"></i> Profile</a>
                    ${(data.status == 1) ? `<a class="btn btn-info btn-sm btn-danger" id="${data.id}" href="#">
                    <i class="fas fa-pencil-alt"></i> Lock Up
                    </a>` : ''}
                    ${(data.status == 2) ? `<a class="btn btn-info btn-sm btn-info1" id="${data.id}" href="#">
                    <i class="fas fa-pencil-alt"></i> Open
                    </a>` : ''}
                    <!--<a class="btn btn-danger btn-sm delete-btn" href="#">
                    <i class="fas fa-trash"></i> Banner
                    </a>-->
                </td>
                </tr>`;
                $("#list-f4").html(html);
            });

            $('.btn-danger').click(function (e) { 
                e.preventDefault();
                let check = confirm("Are you sure you want to lock this account ?");
                let id = $(this).attr('id');
                if (check) {
                $.ajax({
                    type: "POST",
                    url: "/api/webapi/admin/banned",
                    data: {
                    id: id,
                    type: 'close'
                    },
                    dataType: "json",
                    success: function (response) {
                    alert(response.message);
                    location.reload();
                    }
                });
                }
            });

            $('.btn-info1').click(function (e) { 
                e.preventDefault();
                let check = confirm("Are you sure you want to unlock this account ?");
                let id = $(this).attr('id');
                if (check) {
                $.ajax({
                    type: "POST",
                    url: "/api/webapi/admin/banned",
                    data: {
                    id: id,
                    type: 'open'
                    },
                    dataType: "json",
                    success: function (response) {
                    alert(response.message);
                    location.reload();
                    }
                });
                }
            });
        }

        var f4PageNo = 0;
        var f4Limit = 15;
        var f4Page = 1;
        $.ajax({
            type: "POST",
            url: "/admin/member/listF4/<%=phone%>",
            data: {
                phone: phone,
                typeid: "1",
                pageno: f4PageNo,
                limit: f4Limit,
                language: "vi",
            },
            dataType: "json",
            success: function (response) {
                $('#text-f4').text(f4Page + ' / ' + response.page_total);
                if (response.status === true) return RenderF4Members(response.datas);
            },
        });

        $('#nextF4').click(function (e) {
            f4PageNo += f4Limit;

            e.preventDefault();
            $.ajax({
                type: "POST",
                url: "/admin/member/listF4/<%=phone%>",
                data: {
                    typeid: "1",
                    pageno: f4PageNo,
                    limit: f4Limit,
                    language: "vi",
                    phone
                },
                dataType: "json",
                success: function (response) {
                if(response.datas.length == 0) {
                    $('#nextF4').addClass('block-click');
                    return f4PageNo -= f4Limit
                };
                $('#text-f4').text(++f4Page + ' / ' + response.page_total);
                if (response.status === true) return RenderF4Members(response.datas);
                }
            });
        });

        $('#previousF4').click(function (e) { 
            e.preventDefault();
            $('#nextF4').removeClass('block-click');
            f4PageNo -= f4Limit;
            if(f4PageNo < 0) return f4PageNo = 0;
            $.ajax({
                type: "POST",
                url: "/admin/member/listF4/<%=phone%>",
                data: {
                    typeid: "1",
                    pageno: f4PageNo,
                    limit: f4Limit,
                    language: "vi",
                    phone
                },
                dataType: "json",
                success: function (response) {
                $('#text-withdraw').text(--f4Page + ' / ' + response.page_total);
                if (response.status === true) return RenderF4Members(response.datas);
                }
            });
        });
    </script>
    <!-- f4 members -->

    <!--Withdraw-->
    <script>
        const RenderWithdraw = (datas) => {
            if (datas.length == 0) {
                $('#list-withdraw').html(`
                    <tr class="text-center">
                    <td colspan="7">no data...</td>
                    </tr>
                `);
                return;
            }
            let html = '';
            datas.map((data) => {
                html += 
                `
                <tr class="text-center" style="">
                    <td style="color: #e74c3c;font-weight: 600;min-width: 210px">${data.id_order}</td>
                    <td><b style="color: #3498db">${data.money}</b></td>
                    <td style="min-width: 210px;"><b>${data.name_bank}</b></td>
                    <td class="project-state"><span class="badge badge-${(data.status == '1' ? 'success' : 'danger')}">${(data.status == '1' ? 'success' : 'closed')}</span></td>
                    <td style="min-width: 210px;"><b>${data.today}</b></td>
                </tr>
                `;
            });
            $("#list-withdraw").html(html);
        }

        var withPageno = 0;
        var withLimit = 15;
        var withPage = 1;
        $.ajax({
        type: "POST",
        url: "/admin/member/listWithdraw/<%=phone%>",
        data: {
            typeid: "1",
            pageno: withPageno,
            limit: withLimit,
            language: "vi",
        },
        dataType: "json",
        success: function (response) {
            $('#text-withdraw').text(withPage + ' / ' + response.page_total);
            if (response.status === true) return RenderWithdraw(response.datas);
        },
        });

        $('#nextWithdraw').click(function (e) {
            withPageno += withLimit;
        e.preventDefault();
        $.ajax({
            type: "POST",
            url: "/admin/member/listWithdraw/<%=phone%>",
            data: {
            typeid: "1",
            pageno: withPageno,
            limit: withLimit,
            language: "vi",
            },
            dataType: "json",
            success: function (response) {
            if(response.datas.length == 0) {
                $('#nextWithdraw').addClass('block-click');
                return withPageno -= withLimit
            };
            $('#text-withdraw').text(++withPage + ' / ' + response.page_total);
            if (response.status === true) return RenderWithdraw(response.datas);
            }
        });
        });
        
        $('#previousWithdraw').click(function (e) { 
        e.preventDefault();
        $('#nextWithdraw').removeClass('block-click');
        withPageno -= withLimit;
        if(withPageno < 0) return withPageno = 0;
        $.ajax({
            type: "POST",
            url: "/admin/member/listWithdraw/<%=phone%>",
            data: {
            typeid: "1",
            pageno: withPageno,
            limit: withLimit,
            language: "vi",
            },
            dataType: "json",
            success: function (response) {
            $('#text-withdraw').text(--withPage + ' / ' + response.page_total);
            if (response.status === true) return RenderWithdraw(response.datas);
            }
        });
        });
    </script>
    <!--Withdraw-->

    <!--Recharge-->
    <script>
        const RenderRecharge = (datas) => {
            if (datas.length == 0) {
                $('#list-recharge').html(`
                    <tr class="text-center">
                    <td colspan="7">no data...</td>
                    </tr>
                `);
                return;
            }
            let html = '';
            datas.map((data) => {
                html += 
                `
                <tr class="text-center" style="">
                    <td style="color: #e74c3c;font-weight: 600;min-width: 210px">${data.transaction_id}</td>
                    <td><b style="color: #3498db">${(data.money)}</b></td>
                    <td style="min-width: 210px;"><b>${data.type}</b></td>
                    <td class="project-state"><span class="badge badge-${(data.status == '1' ? 'success' : 'warning')}">${(data.status == '1' ? 'success' : 'closed')}</span></td>
                    <td style="min-width: 210px;"><b>${timerJoin(data.time)}</b></td>
                </tr>
                `;
            });
            $("#list-recharge").html(html);
        }

        var pageno1 = 0;
        var limit1 = 15;
        var page1 = 1;
        $.ajax({
        type: "POST",
        url: "/admin/member/listRecharge/<%=phone%>",
        data: {
            typeid: "1",
            pageno: pageno1,
            limit: limit1,
            language: "vi",
        },
        dataType: "json",
        success: function (response) {
            $('#text-recharge').text(page1 + ' / ' + response.page_total);
            if (response.status === true) return RenderRecharge(response.datas);
        },
        });

        $('#nextRecharge').click(function (e) {
        pageno1 += limit1;
        e.preventDefault();
        $.ajax({
            type: "POST",
            url: "/admin/member/listRecharge/<%=phone%>",
            data: {
            typeid: "1",
            pageno: pageno1,
            limit: limit1,
            language: "vi",
            },
            dataType: "json",
            success: function (response) {
            if(response.datas.length == 0) {
                $('#nextRecharge').addClass('block-click');
                return pageno1 -= limit1
            };
            $('#text-recharge').text(++page1 + ' / ' + response.page_total);
            if (response.status === true) return RenderRecharge(response.datas);
            }
        });
        });
        
        $('#previousRecharge').click(function (e) { 
        e.preventDefault();
        $('#nextRecharge').removeClass('block-click');
        pageno1 -= limit1;
        if(pageno1 < 0) return pageno1 = 0;
        $.ajax({
            type: "POST",
            url: "/admin/member/listRecharge/<%=phone%>",
            data: {
            typeid: "1",
            pageno: pageno1,
            limit: limit1,
            language: "vi",
            },
            dataType: "json",
            success: function (response) {
            $('#text-recharge').text(--page1 + ' / ' + response.page_total);
            if (response.status === true) return RenderRecharge(response.datas);
            }
        });
        });
    </script>
    <!--Recharge-->

    <!--Redenvelope-->
    <script>
        const RenderRedenvelopes = (datas) => {
            if (datas.length == 0) {
                $('#list-redenvelope').html(`
                    <tr class="text-center">
                    <td colspan="7">no data...</td>
                    </tr>
                `);
                return;
            }
            let html = '';
            datas.map((data) => {
                html += 
                ` 
                <tr class="text-center" style="">
                    <td style="color: #e74c3c;font-weight: 600;min-width: 210px">${data.phone}</td>
                    <td><b style="color: #3498db">${data.money}</b></td>
                    <td style="min-width: 210px;"><b>${data.id_redenvelops}</b></td>
                    <td class="project-state"><span class="badge badge-success">success</span></td>
                    <td style="min-width: 210px;"><b>${timerJoin(data.time)}</b></td>
                </tr>
                `;
            });
            $("#list-redenvelope").html(html);
        }

        var pageno2 = 0;
        var limit2 = 15;
        var page2 = 1;
        $.ajax({
        type: "POST",
        url: "/admin/member/redenvelope/<%=phone%>",
        data: {
            typeid: "1",
            pageno: pageno2,
            limit: limit2,
            language: "vi",
        },
        dataType: "json",
        success: function (response) {
            $('#text-redenvelope').text(page2 + ' / ' + response.page_total);
            let total = 0;
            let amount = 0;
            for (let i = 0; i < response.datas.length; i++) {
                total += response.datas[i].money;
                amount += 1;
            }
            $('#totlaide').text(' ₹ ' + total   + " / " + amount + ' Lixi');
            if (response.status === true) return RenderRedenvelopes(response.datas);
        },
        });

        $('#nextRedenvelope').click(function (e) {
        pageno2 += limit2;
        e.preventDefault();
        $.ajax({
            type: "POST",
            url: "/admin/member/redenvelope/<%=phone%>",
            data: {
            typeid: "1",
            pageno: pageno2,
            limit: limit2,
            language: "vi",
            },
            dataType: "json",
            success: function (response) {
            if(response.datas.length == 0) {
                $('#nextRedenvelope').addClass('block-click');
                return pageno2 -= limit2
            };
            $('#text-redenvelope').text(++page2 + ' / ' + response.page_total);
            if (response.status === true) return RenderRedenvelopes(response.datas);
            }
        });
        });
        
        $('#previousRedenvelope').click(function (e) { 
        e.preventDefault();
        $('#nextRedenvelope').removeClass('block-click');
        pageno2 -= limit2;
        if(pageno2 < 0) return pageno2 = 0;
        $.ajax({
            type: "POST",
            url: "/admin/member/redenvelope/<%=phone%>",
            data: {
            typeid: "1",
            pageno: pageno2,
            limit: limit2,
            language: "vi",
            },
            dataType: "json",
            success: function (response) {
            $('#text-redenvelope').text(--page2 + ' / ' + response.page_total);
            if (response.status === true) return RenderRedenvelopes(response.datas);
            }
        });
        });
    </script>
    <!--Redenvelope-->

    <!-- BET-->
    <script>
        const RenderBet = (datas) => {
            if (datas.length == 0) {
                $('#list-bet').html(`
                    <tr class="text-center">
                    <td colspan="7">no data...</td>
                    </tr>
                `);
                return;
            }
            let html = '';
            datas.map((data) => {
                html += 
                `
                <tr class="text-center" style="">
                    <td style="color: #e74c3c;font-weight: 600;min-width: 210px">${data.stage}</td>
                    <td><b style="color: #3498db">${(data.status == 1) ? "+" : "-"} ${data.money}</b></td>
                    <td style="min-width: 210px;"><b>${(data.game.toUpperCase())}</b></td>
                    <td class="project-state"><span class="badge badge-${(data.status == '1' ? 'success' : 'danger')}">${(data.status == '1' ? 'win' : 'loss')}</span></td>
                    <td style="min-width: 210px;" class="time"><b>${timerJoin(data.time)}</b></td>
                </tr>
                `;
            });
            $("#list-bet").html(html);
        }

        var pageno3 = 0;
        var limit3 = 30;
        var page3 = 1;
        $.ajax({
        type: "POST",
        url: "/admin/member/bet/<%=phone%>",
        data: {
            typeid: "1",
            pageno: pageno3,
            limit: limit3,
            language: "vi",
        },
        dataType: "json",
        success: function (response) {
            $('#text-bet').text(page3 + ' / ' + response.page_total);
            if (response.status === true) return RenderBet(response.datas);
        },
        });

        $('#nextBet').click(function (e) {
        pageno3 += limit3;
        e.preventDefault();
        $.ajax({
            type: "POST",
            url: "/admin/member/bet/<%=phone%>",
            data: {
            typeid: "1",
            pageno: pageno3,
            limit: limit3,
            language: "vi",
            },
            dataType: "json",
            success: function (response) {
            if(response.datas.length == 0) {
                $('#nextBet').addClass('block-click');
                return pageno3 -= limit3
            };
            $('#text-bet').text(++page3 + ' / ' + response.page_total);
            if (response.status === true) return RenderBet(response.datas);
            }
        });
        });
        
        $('#previousBet').click(function (e) { 
        e.preventDefault();
        $('#nextBet').removeClass('block-click');
        pageno3 -= limit3;
        if(pageno3 < 0) return pageno3 = 0;
        $.ajax({
            type: "POST",
            url: "/admin/member/bet/<%=phone%>",
            data: {
            typeid: "1",
            pageno: pageno3,
            limit: limit3,
            language: "vi",
            },
            dataType: "json",
            success: function (response) {
            $('#text-bet').text(--page3 + ' / ' + response.page_total);
            if (response.status === true) return RenderBet(response.datas);
            }
        });
        });
    </script>
    <!-- BET-->
</body>

</html>